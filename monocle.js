(function(){var u,p,j,h=[].slice,g=[].indexOf||function(c){for(var a=0,b=this.length;a<b;a++)if(a in this&&this[a]===c)return a;return-1};j=["included","extended"];u=function(){function c(){typeof this.init==="function"&&this.init.apply(this,args)}c.include=function(a){var b,d;if(!a)throw"include(obj) requires obj";for(b in a){d=a[b];if(g.call(j,b)<0)this.prototype[b]=d}(a=a.included)&&a.apply(this);return this};c.extend=function(a){var b,d;if(!a)throw"extend(obj) requires obj";for(b in a){d=a[b];
if(g.call(j,b)<0)this[b]=d}(a=a.extended)&&a.apply(this);return this};c.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}};c.prototype.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}};c.prototype.delay=function(a,b){return setTimeout(this.proxy(a),b||0)};return c}();p=this.Monocle={};p.version="0.0.2";p.Events={bind:function(c,a){var b,d,f,e,i;d=c.split(" ");b=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={});e=0;for(i=d.length;e<
i;e++){f=d[e];b[f]||(b[f]=[]);b[f].push(a)}return this},trigger:function(){var c,a,b,d,f;c=1<=arguments.length?h.call(arguments,0):[];b=c.shift();if(b=this.hasOwnProperty("_callbacks")&&((a=this._callbacks)!=null?a[b]:void 0)){d=0;for(f=b.length;d<f;d++){a=b[d];if(a.apply(this,c)===false)break}return true}},unbind:function(c,a){var b,d,f,e,i;if(!c){this._callbacks={};return this}f=(b=this._callbacks)!=null?b[c]:void 0;if(!f)return this;if(!a){delete this._callbacks[c];return this}d=e=0;for(i=f.length;e<
i;d=++e){b=f[d];if(b===a){f=f.slice();f.splice(d,1);this._callbacks[c]=f;break}}return this}};p.Module=u;p.Dom=function(){var c;c=1<=arguments.length?h.call(arguments,0):[];return $$?$$.apply(null,c):$.apply(null,c)}}).call(this);(function(){var u,p={}.hasOwnProperty,j=function(g,c){function a(){this.constructor=g}for(var b in c)if(p.call(c,b))g[b]=c[b];a.prototype=c.prototype;g.prototype=new a;g.__super__=c.prototype;return g},h=[].slice;Monocle.Model=function(g){function c(a){c.__super__.constructor.apply(this,arguments);a&&this.load(a);this.uid=this.constructor.uid()}j(c,g);c.extend(Monocle.Events);c.records={};c.attributes=[];c.uid_counter=0;c.configure=function(){var a,b;b=arguments[0];a=2<=arguments.length?h.call(arguments,
1):[];this.className=b;this.records={};if(a.length)this.attributes=a;this.attributes||(this.attributes=[]);this.unbind();return this};c.create=function(a){return(new this(a)).save()};c.uid=function(){this.uid_counter++;return u()};c.exists=function(a){try{return this.find(a)}catch(b){return false}};c.find=function(a){a=this.records[a];if(!a)throw Error("Unknown record");return a.clone()};c.findBy=function(a,b){var d,f,e;e=this.records;for(d in e){f=e[d];if(f[a]===b)return f.clone()}throw Error("Unknown record");
};c.select=function(a){var b,d;return this.cloneArray(function(){var f,e;f=this.records;e=[];for(b in f){d=f[b];a(d)&&e.push(d)}return e}.call(this))};c.all=function(){return this.cloneArray(this.recordsValues())};c.count=function(){return this.recordsValues().length};c.cloneArray=function(a){var b,d,f,e;e=[];d=0;for(f=a.length;d<f;d++){b=a[d];e.push(b.clone())}return e};c.recordsValues=function(){var a,b,d,f;b=[];f=this.records;for(a in f){d=f[a];b.push(d)}return b};c.destroyAll=function(){return this.records=
{}};c.prototype.isNew=function(){return!this.exists()};c.prototype.exists=function(){return this.uid&&this.uid in this.constructor.records};c.prototype.clone=function(){return createObject(this)};c.prototype.load=function(a){var b,d;for(b in a){d=a[b];typeof this[b]==="function"&&this[b](d);this[b]=d}return this};c.prototype.attributes=function(){var a,b,d,f,e;b={};e=this.constructor.attributes;d=0;for(f=e.length;d<f;d++){a=e[d];if(a in this)b[a]=typeof this[a]==="function"?this[a]():this[a]}if(this.id)b.id=
this.id;return b};c.prototype.save=function(){var a;if(a=this.validate()){this.trigger("error",a);return false}this.trigger("beforeSave");a=this.isNew()?this.create():this.update();this.trigger("save");return a};c.prototype.updateAttributes=function(a){this.load(a);return this.save()};c.prototype.create=function(){var a;this.trigger("beforeCreate");a=new this.constructor(this.attributes());a.uid=this.uid;this.constructor.records[this.uid]=a;this.trigger("create");this.trigger("change","create");return a.clone()};
c.prototype.update=function(){var a;this.trigger("beforeUpdate");a=this.constructor.records;a[this.uid].load(this.attributes());this.trigger("update");this.trigger("change","update");return a[this.uid].clone()};c.prototype.destroy=function(){this.trigger("beforeDestroy");delete this.constructor.records[this.uid];this.trigger("destroy");this.trigger("change","destroy");this.unbind();return this};c.prototype.validate=function(){throw Error(""+error+" in "+this.constructor.name+" model");};c.prototype.clone=
function(){return Object.create(this)};c.prototype.unbind=function(){return this.trigger("unbind")};c.prototype.trigger=function(){var a,b;a=1<=arguments.length?h.call(arguments,0):[];a.splice(1,0,this);return(b=this.constructor).trigger.apply(b,a)};return c}(Monocle.Module);if(typeof Object.create!=="function")Object.create=function(g){var c;c=function(){};c.prototype=g;return new c};u=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(g){var c;c=Math.random()*16|0;
return(g==="x"?c:c&3|8).toString(16)}).toUpperCase()}}).call(this);(function(){var u=function(h,g){return function(){return h.apply(g,arguments)}},p={}.hasOwnProperty,j=function(h,g){function c(){this.constructor=h}for(var a in g)if(p.call(g,a))h[a]=g[a];c.prototype=g.prototype;h.prototype=new c;h.__super__=g.prototype;return h};Monocle.Controller=function(h){function g(c){this.destroy=u(this.destroy,this);var a,b,d;d=this.options=c;for(a in d){b=d[a];this[a]=b}if(!this.el)this.el=Monocle.Dom(document.createElement(this.tag));if(!this.events)this.events=this.constructor.events;
if(!this.elements)this.elements=this.constructor.elements;this.events&&this.delegateEvents();this.elements&&this.refreshElements();g.__super__.constructor.apply(this,arguments)}j(g,h);g.include(Monocle.Events);g.prototype.eventSplitter=/^(\S+)\s*(.*)$/;g.prototype.tag="div";g.prototype.delegateEvents=function(){var c,a,b,d,f,e;f=this.events;e=[];for(a in f){d=f[a];if(typeof d!=="function")d=this.proxy(this[d]);b=a.match(this.eventSplitter);c=b[1];b=b[2];b===""?e.push(this.el.bind(c,d)):e.push(this.el.delegate(b,
c,d))}return e};g.prototype.refreshElements=function(){var c,a,b,d,f;d=this.elements;f=[];for(a in d){b=d[a];c=$(a,this.el);this.el.find(a);f.push(this[b]=c)}return f};g.prototype.destroy=function(){this.trigger("release");this.el.remove();return this.unbind()};return g}(Monocle.Module)}).call(this);(function(){var u={}.hasOwnProperty,p=function(h,g){function c(){this.constructor=h}for(var a in g)if(u.call(g,a))h[a]=g[a];c.prototype=g.prototype;h.prototype=new c;h.__super__=g.prototype;return h},j=[].slice;Monocle.View=function(h){function g(){if(!this.template)this.template=this.constructor.template;if(!this.container)this.container=this.constructor.container;this.container=Monocle.Dom(this.container);this.container.attr("data-monocle",this.constructor.name);g.__super__.constructor.apply(this,
arguments)}p(g,h);g.container=null;g.prototype.html=function(){var c;c=1<=arguments.length?j.call(arguments,0):[];return this._html.apply(this,["html"].concat(j.call(c)))};g.prototype.append=function(){var c;c=1<=arguments.length?j.call(arguments,0):[];return this._html.apply(this,["append"].concat(j.call(c)))};g.prototype.prepend=function(){var c;c=1<=arguments.length?j.call(arguments,0):[];return this._html.apply(this,["prepend"].concat(j.call(c)))};g.prototype.remove=function(){1<=arguments.length&&
j.call(arguments,0);this.item.destroy();return this.el.remove()};g.prototype.refresh=function(){return this.replace(Mustache.render(this.template,this.item))};g.prototype._html=function(){var c,a,b;b=arguments[0];a=2<=arguments.length?j.call(arguments,1):[];a=function(){var d,f,e;e=[];d=0;for(f=a.length;d<f;d++){c=a[d];e.push(c.el||c)}return e}();this.replace(Mustache.render.apply(Mustache,[this.template].concat(j.call(a))));this.container[b](this.el[0]);this.refreshElements();return this};g.prototype.replace=
function(c){var a;a=[this.el,Monocle.Dom(c.el||c)];c=a[0];this.el=a[1];c.replaceWith(this.el[0]);this.delegateEvents(this.events);this.refreshElements();return this.el};return g}(Monocle.Controller)}).call(this);(function(){var u,p,j,h,g,c=[].slice;g={};u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};j=function(a,b,d){var f,e,i,k,w;if(d==null)d=null;if(a===".")return b[b.length-1];i=a.split(/\./);a=i[0];i=2<=i.length?c.call(i,1):[];for(e=k=w=b.length-1;w<=-1?k<-1:k>-1;e=w<=-1?++k:--k)if(b[e]!=null)if(typeof b[e]==="object"&&a in(f=b[e])){d=f[a];break}b=0;for(e=i.length;b<e;b++){a=i[b];d=j(a,[d])}if(d instanceof Function)d=function(y){return function(){var z;z=y.apply(f,arguments);
return z instanceof Function&&z.apply(null,arguments)||z}}(d);return d};p=function(){var a,b,d,f;d=arguments[0];f=arguments[1];a=3<=arguments.length?c.call(arguments,2):[];return function(){var e,i,k;k=[];e=0;for(i=f.length;e<i;e++){b=f[e];k.push(b.call.apply(b,[d].concat(c.call(a))))}return k}().join("")};h=function(a,b,d){var f,e,i,k,w,y,z,A,K,G,o,D,H,s,v,I,B;if(b==null)b=["{{","}}"];if(d==null)d=null;w=g[e=b.join(" ")]||(g[e]={});if(a in w)return w[a];e=[];f=function(){return RegExp("([\\s\\S]*?)([ \\t]*)(?:"+
b[0]+"\\s*(?:(!)\\s*([\\s\\S]+?)|(=)\\s*([\\s\\S]+?)\\s*=|({)\\s*(\\w[\\S]*?)\\s*}|([^0-9a-zA-Z._!={]?)\\s*([\\w.][\\S]*?))\\s*"+b[1]+")","gm")};v=f();v.lastIndex=s=(d||{start:0}).start;for(H=function(l,t){var q,m,n,E,F,r,x,C;(m=/$/gm).lastIndex=l;m.exec(a);r=a.substr(0,l).split("\n");C=r.length;r=r[C-1];q=y+B.length;x=a.substr(q+1,l-q-1);E=Array(r.length-x.length+1).join(" ");q=Array(x.length+1).join("^");r+=a.substr(l,m.lastIndex-l);n=Error();for(F in m={message:""+t+"\n\nLine "+C+":\n"+r+"\n"+
E+q,error:t,line:C,"char":E.length,tag:x})n[F]=m[F];return n};o=v.exec(a);){k=o.slice(1,3);i=k[0];B=k[1];k=o[3]||o[5]||o[7]||o[9];o=o[4]||o[6]||o[8]||o[10];y=s+i.length-1;s=v.lastIndex;G=(y===-1||a.charAt(y)==="\n")&&((D=a.charAt(s))===void 0||D===""||D==="\r"||D==="\n");i&&e.push(function(l){return function(){return l}}(i));if(G&&k!==""&&k!=="&"&&k!=="{"){if(a.charAt(s)==="\r")s+=1;if(a.charAt(s)==="\n")s+=1}else if(B){e.push(function(l){return function(){return l}}(B));y+=B.length;B=""}switch(k){case "!":break;
case "":case "&":case "{":i=function(l,t){return function(q){var m,n;if((m=(n=j(l,q))!=null?n:"")instanceof Function)m=p.apply(null,[this,h(""+m())].concat(c.call(arguments)));t||(m=this.escape(""+m));return""+m}};e.push(i(o,k));break;case ">":k=function(l,t){return function(q,m){var n;n=m(l).toString();if(t)n=n.replace(/^(?=.)/gm,t);return p.apply(null,[this,h(n)].concat(c.call(arguments)))}};e.push(k(o,B));break;case "#":case "^":i={name:o,start:s,error:H(v.lastIndex,"Unclosed section '"+o+"'!")};
G=h(a,b,i);I=G[0];s=G[1];i["#"]=function(l,t,q){return function(m){var n,E,F,r;r=j(l,m)||[];I=r instanceof Function?r(q):q;r instanceof Array||(r=[r]);n=h(I||"",t);m.push(r);E=function(){var x,C,J;J=[];x=0;for(C=r.length;x<C;x++){F=r[x];m[m.length-1]=F;J.push(p.apply(null,[this,n].concat(c.call(arguments))))}return J}.apply(this,arguments);m.pop();return E.join("")}};i["^"]=function(l,t,q){return function(m){var n;n=j(l,m)||[];n instanceof Array||(n=[1]);n=n.length===0?h(q,t):[];return p.apply(null,
[this,n].concat(c.call(arguments)))}};e.push(i[k](o,b,I));break;case "/":if(d==null)A="End Section tag '"+o+"' found, but not in section!";else if(o!==(D=d.name))A="End Section tag closes '"+o+"'; expected '"+D+"'!";if(A)throw H(v.lastIndex,A);a=a.slice(d.start,y+1||9E9);w[a]=e;return[a,s];case "=":if((b=o.split(/\s+/)).length!==2)A="Set Delimiters tags should have two and only two values!";if(A)throw H(v.lastIndex,A);K=/[-[\]{}()*+?.,\\^$|#]/g;b=function(){var l,t,q;q=[];l=0;for(t=b.length;l<t;l++){z=
b[l];q.push(z.replace(K,"\\$&"))}return q}();v=f();break;default:throw H(v.lastIndex,"Unknown tag type -- "+k);}v.lastIndex=s!=null?s:a.length}if(d!=null)throw d.error;a.length!==s&&e.push(function(){return a.slice(s)});return w[a]=e};this.Mustache={version:"0.0.1",helpers:[],partials:null,escape:function(a){return String(a).replace(/[&"<>]/g,function(b){return"&"+u[b]+";"})},render:function(a,b,d){if(d==null)d=null;return p(this,h(a),[].concat([b]),d)}}}).call(this);
